@using NoteBat.Shared.NavigationList
<div class="navContainer">
    <div class="navTitle">
        <div>
            <p class="titleText">NoteBat</p>
        </div>
        <div class="titleIcon">
            <MudIcon Icon="@Icons.Filled.AddCircle" Color="Color.Tertiary"/>        
        </div>
    </div>

    <div class="navList">
        <ul class="navListParent">
            @foreach(var item in navItemList ?? Enumerable.Empty<NavigationListItem>())
            {
                @if(item.ParentId == 0)
                {
                    <li class="navListElement" @onclick="() => OpenLink(item.Id)">
                        <div class="textLink">
                            <a href="#" class="textLink">@item.Name</a>
                        </div>
                        <div>
                            <MudIcon Icon="@item.Icon" Style="@($"color:{Colors.Purple.Lighten5};")"/>
                        </div>
                    </li>
                    
                    @foreach(var subItem in navItemList ?? Enumerable.Empty<NavigationListItem>())
                    {
                        
                        @if(item.Id == subItem.ParentId)
                        {
                            <li class="@(item.isOpen ? "subItemElementContainer" : "subItemClose")">
                              <div class="subItemElement">
                                <div>
                                   <hr/>
                                </div>
                                <div>
                                   <a href="#" class="textSubLink">@subItem.Name</a>
                                </div>
                              </div>   
                            </li>
                        }
                    }
                }   
            }
        </ul>
    </div>
</div>

@code {
    private string currentIcon = @Icons.Filled.KeyboardArrowRight;

    private NavigationListItem[]? navItemList = new NavigationListItem[]
    {
          new NavigationListItem { Id = 1, ParentId = 0, isOpen = false, Name = "Matlı", Icon = @Icons.Filled.KeyboardArrowRight},
          new NavigationListItem { Id = 2, ParentId = 0, isOpen = false, Name = "Tarım Kredi", Icon = @Icons.Filled.KeyboardArrowRight},
          new NavigationListItem { Id = 3, ParentId = 1, isOpen = false, Name = "Polatlı", Icon = @Icons.Filled.KeyboardArrowRight},
          new NavigationListItem { Id = 4, ParentId = 1, isOpen = false, Name = "Turgutlu", Icon = @Icons.Filled.KeyboardArrowRight},
          new NavigationListItem { Id = 5, ParentId = 2, isOpen = false, Name = "Sakarya", Icon = @Icons.Filled.KeyboardArrowRight},
          new NavigationListItem { Id = 6, ParentId = 2, isOpen = false, Name = "Urfa", Icon = @Icons.Filled.KeyboardArrowRight},
          new NavigationListItem { Id = 7, ParentId = 2, isOpen = false, Name = "Tire", Icon = @Icons.Filled.KeyboardArrowRight},
    };

    private void OpenLink(int listItemId)
    {
            var clickedItem = navItemList.Where(x => x.Id == listItemId).FirstOrDefault();

            clickedItem.isOpen = !clickedItem.isOpen;

            clickedItem.Icon = clickedItem.isOpen ? @Icons.Filled.KeyboardArrowDown : @Icons.Filled.KeyboardArrowRight;
    }
}
